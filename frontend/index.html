<!-- This file defines the structure and content of your application's user interface. 
 It's written in HTML (HyperText Markup Language). 
 It contains no logic, only a description of what should be on the page. -->

<!DOCTYPE html>
<html>
<head>  <!-- The 'head' contains meta-information about the page. -->
    <meta charset="UTF-8">
    <title>BoviTrack - Livestock Management</title> <!-- The text that appears in the window's title bar. -->
    <link rel="stylesheet" href="./node_modules/ag-grid-community/styles/ag-theme-quartz.css"> <!-- The first one loads the styles for our data grid theme. -->
    <link rel="stylesheet" href="styles.css"> <!-- The second one loads our own custom styles. -->
</head>

<body> <!-- The 'body' contains all the visible content of the page. -->

    <!-- This header will be our permanent navigation bar -->
    <header class="main-header"> <!-- This is our top navigation bar. -->
        <div class="header-left">
            <span class="logo">BoviTrack</span> 
            <div class="farm-selector">
                <label for="farm-select" data-translate="current_farm">Current Farm:</label>
                <!-- The farm dropdown will be populated by JavaScript -->
                <select id="farm-select" name="farms"></select>
                <button id="add-farm-btn" class="action-button" title="Add New Farm">+</button>
                <button id="rename-farm-btn" class="action-button" title="Rename Selected Farm">üñâ</button>
                <button id="delete-farm-btn" class="action-button btn-danger" title="Delete Selected Farm">üóëÔ∏è</button> 
            </div>
        </div>
        <nav class="main-nav">
            <ul>
                <li><a href="#" class="nav-link active" data-page="page-active-stock" data-translate="active_stock">Active Stock</a></li>
                <li class="has-dropdown dropdown-align-center">
                    <a href="#" data-translate="history">History</a>
                    <ul class="dropdown">
                        <li><a href="#" class="nav-link" data-page="page-history-purchases" data-translate="purchases">Purchases</a></li>
                        <li><a href="#" class="nav-link" data-page="page-history-sales" data-translate="sales">Sales</a></li>
                        <li><a href="#" class="nav-link" data-page="page-history-weightings" data-translate="weightings">Weightings</a></li>
                        <li><a href="#" class="nav-link" data-page="page-history-loc-changes" data-translate="location_changes">Location Changes</a></li>
                        <li><a href="#" class="nav-link" data-page="page-history-diet-logs" data-translate="diet_logs">Diet Logs</a></li>
                        <li><a href="#" class="nav-link" data-page="page-history-sanitary" data-translate="sanitary_protocols">Sanitary Protocols</a></li>
                        <li><a href="#" class="nav-link" data-page="page-history-death" data-translate="deaths">Deaths</a></li>

                        
                        <!-- Add other history links as needed -->
                    </ul>
                </li>
                <li class="has-dropdown dropdown-align-center">
                    <a href="#" data-translate="add">Add</a>
                    <ul class="dropdown">
                        <li><a href="#" class="nav-link" data-page="page-add-purchase" data-translate="purchase">Purchase</a></li>
                        <li><a href="#" class="nav-link" data-page="page-add-sale" data-translate="sale">Sale</a></li>
                        <li><a href="#" class="nav-link" data-page="page-add-weighting" data-translate="weighting">Weighting</a></li>
                        <li><a href="#" class="nav-link" data-page="page-add-location" data-translate="location">Location</a></li>
                        <li><a href="#" class="nav-link" data-page="page-add-location-change" data-translate="location_change">Location Change</a></li>
                        <li><a href="#" class="nav-link" data-page="page-add-diet-log" data-translate="diet_log">Diet Log</a></li>
                        <li><a href="#" class="nav-link" data-page="page-add-sanitary" data-translate="sanitary_protocol">Sanitary Protocol</a></li>
                        <li><a href="#" class="nav-link" data-page="page-add-death" data-translate="death">Death</a></li>
                        <!-- Add other 'add' links as needed -->
                    </ul>
                </li>
                <li class="has-dropdown dropdown-align-right">
                    <a href="#" data-translate="consult">Consult</a>
                    <ul class="dropdown">
                        <li><a href="#" class="nav-link" data-page="page-consult-animal" data-translate="animal">Animal</a></li>
                        <li><a href="#" class="nav-link" data-page="page-consult-location" data-translate="location">Location</a></li>
                        <li><a href="#" class="nav-link" data-page="page-consult-diet" data-translate="lot">Lot</a></li>
                        <!-- Add other 'consult' links as needed -->
                    </ul>
                </li>
                <li><a href="#" class="nav-link" data-page="page-settings">‚öôÔ∏è</a></li>
            </ul>
        </nav>
    </header>
    <!-- The main content area where pages will be swapped out -->
    <main id="app-content"> 
        <!-- Inside, we have different "pages", which are just <div> containers. -->

        <!-- Page 1: The Active Stock Summary -->


    </main>
    <!-- ADD FARM MODAL -->
    <div id="add-farm-modal" class="modal-backdrop hidden">
        <div class="modal-content">
            <h3 data-translate="register_new_farm">Register New Farm</h3>
            <form id="add-farm-form">
                <label for="new-farm-name" data-translate="farm_name">Farm Name:</label>
                <input type="text" id="new-farm-name" required>
                <div class="modal-actions">
                    <button type="submit" data-translate="save_farm">Save Farm</button>
                    <button type="button" id="cancel-add-farm" data-translate="cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Rename Farm Modal -->
    <div id="rename-farm-modal" class="modal-backdrop hidden">
        <div class="modal-content">
            <h3 data-translate="rename_farm">Rename Farm</h3>
            <form id="rename-farm-form">
                <label for="rename-farm-name" data-translate="new_farm_name">New Farm Name:</label>
                <input type="text" id="rename-farm-name" required>
                <div class="modal-actions">
                    <button type="submit" data-translate="save_changes">Save Changes</button>
                    <button type="button" id="cancel-rename-farm" data-translate="cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

        <!-- NEW: Delete Farm Confirmation Modal -->
    <div id="delete-farm-modal" class="modal-backdrop hidden">
        <div class="modal-content">
            <h3 data-translate="confirm_deletion">Confirm Deletion</h3>
            <p class="warning-text" data-translate="confirm_delete_farm_message_1">Are you sure you want to delete the farm "<strong id="farm-name-to-delete"></strong>"?</p>
            <p class="warning-text" data-translate="confirm_delete_farm_message_2"><strong>This action is permanent and cannot be undone.</strong> All animals, sales, weightings, and other associated data for this farm will be permanently deleted.</p>
            <div class="modal-actions">
                <!-- We will use a form here to listen for the submit event -->
                <form id="delete-farm-form">
                    <button type="button" id="cancel-delete-farm" data-translate="cancel">Cancel</button>
                    <button type="submit" class="btn-danger" data-translate="confirm_delete">Confirm Delete</button>
                </form>
            </div>
        </div>
    </div>
    
     <!-- ADD PURCHASE MODAL -->
    <div id="add-purchase-modal" class="modal-backdrop hidden">
        <div class="modal-content">
            <h3 data-translate="add_new_purchase">Add New Purchase</h3>
            <form id="add-purchase-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="purchase-ear-tag" data-translate="ear_tag">Ear Tag</label>
                        <input type="text" id="purchase-ear-tag" required>
                    </div>
                    <div class="form-group">
                        <label for="purchase-lot" data-translate="lot">Lot</label>
                        <input type="text" id="purchase-lot" required>
                    </div>
                    <div class="form-group">
                        <label for="purchase-entry-date" data-translate="entry_date">Entry Date</label>
                        <input type="date" id="purchase-entry-date" required>
                    </div>
                    <div class="form-group">
                        <label for="purchase-entry-age" data-translate="entry_age_months">Entry Age (Months)</label>
                        <input type="number" step="0.1" id="purchase-entry-age" required>
                    </div>
                    <div class="form-group">
                        <label for="purchase-entry-weight" data-translate="entry_weight_kg">Entry Weight (kg)</label>
                        <input type="number" step="0.01" id="purchase-entry-weight" required>
                    </div>
                    <div class="form-group">
                        <label for="purchase-sex" data-translate="sex">Sex</label>
                        <select id="purchase-sex" required>
                            <option value="M" data-translate="male">Male</option>
                            <option value="F" data-translate="female">Female</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="purchase-race" data-translate="race_optional">Race (Optional)</label>
                        <input type="text" id="purchase-race">
                    </div>
                    <div class="form-group">
                        <label for="purchase-price" data-translate="purchase_price_optional">Purchase Price (Optional)</label>
                        <input type="number" step="0.01" id="purchase-price">
                    </div>
                    <div class="form-group form-group-full">
                        <label for="purchase-location" data-translate="initial_location">Initial Location</label>
                        <select id="purchase-location" required>
                            <!-- Locations will be populated by JavaScript -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="purchase-diet-type" data-translate="initial_diet_type">Initial Diet Type (Optional)</label>
                        <input type="text" id="purchase-diet-type">
                    </div>
                    <div class="form-group">
                        <label for="purchase-diet-intake" data-translate="initial_diet_intake_percentage">Initial Diet Intake (%)</label>
                        <input type="number" step="0.1" id="purchase-diet-intake">
                    </div>
                    <!-- NEW: Sanitary Protocols Section -->
                    <div class="sub-form-section">
                        <h4 data-translate="add_sanitary_protocols_optional">Add Sanitary Protocols (Optional)</h4>
                        <!-- This is where the list of added protocols will appear -->
                        <ul id="protocols-list" class="dynamic-list">
                            <!-- Items will be added here by JavaScript -->
                        </ul>
                        <!-- This is the mini-form for adding a new protocol -->
                    <div class="sub-form-inputs">
                        <input type="date" id="protocol-date" data-translate-placeholder="date_placeholder">
                        <input type="text" id="protocol-type" data-translate-placeholder="protocol_type_placeholder">
                        <input type="text" id="protocol-product" data-translate-placeholder="product_name_placeholder">
                        <input type="text" id="protocol-invoice" data-translate-placeholder="invoice_number_placeholder">
                        <button type="button" id="add-protocol-btn" class="button-secondary" data-translate="add_protocol">Add Protocol</button>
                        <button type="button" id="clear-protocols-btn" class="button-secondary btn-danger" data-translate="clear_all">Clear All</button>
                    </div>
                    
                </div>
                <div class="modal-actions">
                    <button type="submit" data-translate="save_purchase">Save Purchase</button>
                    <button type="button" id="cancel-add-purchase" data-translate="cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- CRITICAL: This line loads and executes our JavaScript files. -->
    <!-- It is placed at the end of the <body> so that the JavaScript code runs -->
    <!-- AFTER all the HTML elements above it have been created. This ensures -->
    <!-- that getElementById() can find the elements it's looking for. -->
    <script src="./js/translations.js"></script>
    <script src="./js/main-renderer.js"></script>
    <script src="./js/pages/active-stock.js"></script>
    <script src="./js/pages/history-purchases.js"></script>
    <script src="./js/pages/settings.js"></script>
</body>
</html>